"use strict";var COLORS={11:"#e8e6f2",12:"#b5d3e7",13:"#4fadd0",21:"#e5b4d9",22:"#b8b3d8",23:"#3983bb",31:"#de4fa6",32:"#b03598",33:"#2a1a8a"},YEARS=["2012","2013","2014","2015","2016"],cssNamespace="cor-viz-rents";d3.playbooks.defaults({cssNamespace:cssNamespace});var initialHilight=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Wolfsburg";e.ready().then(function(){var n=e.data().find(function(e){return e.name===t});e.hilight(n),e.control().trigger(riot.EVT.updateSelector,n),e.control().trigger(riot.EVT.updateInfobox,n)})};window.renderRentMap=function(){var e=d3.playbooks.choroplethMap({width:600,height:810,cssNamespace:cssNamespace,elementId:"rents-map",dataUrl:"./data/map_data.csv",geoDataUrl:"./data/landkreise_simplify200.topo.json",isTopojson:!0,topojsonLayerName:"landkreise_simplify200",responsiveSvg:!0,getId:function(e){return e.properties.RS},color:function(e){return COLORS[e]}}).render().selector({element:"#rents-map-selector",getLabel:function(e){return e.name}}).infobox({element:"#rents-map-infobox",template:"\n        <dl>\n          <dt>{rent_median} € / m²</dt>\n          <dd>Miete 2016</dd>\n          <dt>{percent_change} %</dt>\n          <dd>Anstieg seit 2012</dd>\n        </dl>\n      "}),t=d3.select("#rents-map-timeline");d3.playbooks.timeLineChart.defaults({elementId:"rents-map-timeline",width:150,height:200,curve:d3.curveStep,timeFormat:"%Y",yExtent:[3.5,15],getYAxis:function(e){var t=e.yScale;return d3.axisRight(t)},showXLabel:!1,showYLabel:!1,yTickFormat:function(e){return e>3?e+" €":""},yLabel:"€ / m²",yTicks:3,xTicks:3,margin:{top:20,right:15,bottom:20,left:15}});var n=function(e){t.selectAll("*").remove();var n=[YEARS,YEARS.map(function(t){return Number(e[t])})];d3.playbooks.timeLineChart({data:n,color:COLORS[e.value]}).render()};e.control().on(riot.EVT.updateInfobox,function(e){return n(e)}),initialHilight(e)},window.renderScatter=function(){var e=d3.playbooks.scatterChart({elementId:"scatter-plot",dataUrl:"./data/scatter.csv",xCol:"rent_median",yLabel:"Einwohner pro m²",xLabel:"Mittlerer Mietpreis in € pro m²",yCol:"density",getXDomain:function(){return[4,16]},sizeCol:"size",sizeRange:[4,20],groupCol:"color",color:COLORS,yTicks:5,yTickFormat:function(e){return e>0?e/1e3+" T.":""},getLegendItems:function(e){var t=e.data,n=d3.extent(t,function(e){return Number(e["2016pop"])}),r=d3.scaleLinear().domain(n).range([4,20]);return[1e5,5e5,2e6].reverse().map(function(e){var t=r(e),n=e<1e6?e/1e3+" T.":e/1e6+" Mio.";return{color:COLORS[11],label:n,size:30,radius:t}})}}).render().selector({element:"#scatter-plot-selector",getLabel:function(e){return e.name}}).infobox({element:"#scatter-plot-infobox",template:"\n        <dl>\n          <dt>{rent_median} € / m²</dt>\n          <dd>Miete 2016</dd>\n          <dt>{percent_change} %</dt>\n          <dd>Anstieg seit 2012</dd>\n        </dl>\n      "}).legend({element:"#scatter-plot-legend",wrapperTemplate:"{body}",itemTemplate:'\n        <div class="cor-viz-rents__scatter-legend-item">\n          <svg width="{size}" height="{size}">\n            <circle r={radius} cx=15 cy=15 style="fill:{color}"></circle>\n          </svg>\n          <span>{label}</span>\n        </div>\n      '});initialHilight(e)},window.renderComparisonLines=function(){d3.playbooks.multiTimeLineChart.defaults({width:250,height:300,xTicks:3,yTickFormat:function(e){return e>0?e+" €":""},yLabel:"Mittlerer Mietpreis pro m²",timeFormat:"%Y",showXLabel:!1,curve:d3.curveStep,getYDomain:function(){return[0,15]},dataUrl:"./data/comparison.csv"}),d3.playbooks.multiTimeLineChart({elementId:"comparison-ruhr",yCols:["Herne","Oberhausen","Essen","Gelsenkirchen","Duisburg","Bochum","Dortmund"],color:COLORS[21]}).render(),d3.playbooks.multiTimeLineChart({elementId:"comparison-muc",yCols:["München","Dachau","Ebersberg","Fürstenfeldbruck","München (Kreis)","Starnberg"],color:COLORS[23],showYLabel:!1}).render()},window.renderComparisonMaps=function(){var e=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=d3.playbooks.choroplethMap({width:600,height:810,cssNamespace:cssNamespace,elementId:"comparison-map-"+e,yCol:e,yExtent:[5,15],dataUrl:"./data/map_data.csv",geoDataUrl:"./data/landkreise_simplify200.topo.json",isTopojson:!0,topojsonLayerName:"landkreise_simplify200",responsiveSvg:!0,getId:function(e){return e.properties.RS},hilightNode:function(){},color:[COLORS[11],COLORS[12],COLORS[13],COLORS[23],COLORS[33]]}).render();t&&n.legend({element:"#comparison-maps-legend",itemTemplate:'<li><span style="background-color:{color}"></span>{label}&nbsp;€</li>'})};e(2012),e(2016,!1)};
